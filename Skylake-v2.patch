From beee11a28dbeac6bc3a307d25a855049d6c630af Mon Sep 17 00:00:00 2001
From: Athenas Jimenez Gonzalez <athenas.jimenez.gonzalez@intel.com>
Date: Wed, 2 May 2018 18:54:20 +0000
Subject: [PATCH] Skylake v2

---
 gcc/config/i386/haswell.md | 32 ++++++++++++++++----------------
 1 file changed, 16 insertions(+), 16 deletions(-)

diff --git a/gcc/config/i386/haswell.md b/gcc/config/i386/haswell.md
index 4d547fa23..9832e3f52 100644
--- a/gcc/config/i386/haswell.md
+++ b/gcc/config/i386/haswell.md
@@ -104,13 +104,13 @@
 				   (eq_attr "type" "imov")))
 			 "hsw_decodern,hsw_p4+(hsw_p2|hsw_p3|hsw_p7)")
 
-(define_insn_reservation "hsw_icmov" 2
+(define_insn_reservation "hsw_icmov" 5
 			 (and (eq_attr "cpu" "generic,haswell")
 			      (and (eq_attr "memory" "none")
 				   (eq_attr "type" "icmov")))
 			 "hsw_decodern,hsw_p0156,hsw_p0156")
 
-(define_insn_reservation "hsw_icmov_load" 2
+(define_insn_reservation "hsw_icmov_load" 5
 			 (and (eq_attr "cpu" "generic,haswell")
 			      (and (eq_attr "memory" "load")
 				   (eq_attr "type" "icmov")))
@@ -482,91 +482,91 @@
 				   (eq_attr "type" "sselog,sselog1")))
 			 "hsw_decodern,hsw_p015+hsw_p23")
 
-(define_insn_reservation "hsw_sse_add" 3
+(define_insn_reservation "hsw_sse_add" 4
 			 (and (eq_attr "cpu" "generic,haswell")
 			      (and (eq_attr "memory" "none")
 				   (eq_attr "type" "sseadd")))
 			"hsw_decodern,hsw_p1|hsw_p5")
 
-(define_insn_reservation "hsw_sse_add_load" 3
+(define_insn_reservation "hsw_sse_add_load" 4
 			 (and (eq_attr "cpu" "generic,haswell")
 			      (and (eq_attr "memory" "load")
 				   (eq_attr "type" "sseadd")))
 			"hsw_decodern,(hsw_p1|hsw_p5)+hsw_p23")
 
-(define_insn_reservation "hsw_sse_mul" 5
+(define_insn_reservation "hsw_sse_mul" 4
 			 (and (eq_attr "cpu" "generic,haswell")
 			      (and (eq_attr "memory" "none")
 				   (eq_attr "type" "ssemul")))
 			"hsw_decodern,hsw_p0")
 
-(define_insn_reservation "hsw_sse_mul_load" 5
+(define_insn_reservation "hsw_sse_mul_load" 4
 			 (and (eq_attr "cpu" "generic,haswell")
 			      (and (eq_attr "memory" "load")
 				   (eq_attr "type" "ssemul")))
 			"hsw_decodern,hsw_p0+hsw_p23")
 ;; Use skylake pipeline.
-(define_insn_reservation "hsw_sse_muladd" 5
+(define_insn_reservation "hsw_sse_muladd" 4
 			 (and (eq_attr "cpu" "generic,haswell")
 			      (and (eq_attr "memory" "none")
 					(eq_attr "type" "ssemuladd")))
 			"hsw_decodern,hsw_p01")
 
-(define_insn_reservation "hsw_sse_muladd_load" 5
+(define_insn_reservation "hsw_sse_muladd_load" 4
 			 (and (eq_attr "cpu" "generic,haswell")
 			      (and (eq_attr "memory" "load")
 					(eq_attr "type" "ssemuladd")))
 			"hsw_decodern,hsw_p01+hsw_p23")
 
-(define_insn_reservation "hsw_sse_div_SF" 18
+(define_insn_reservation "hsw_sse_div_SF" 14
 			 (and (eq_attr "cpu" "generic,haswell")
 			      (and (eq_attr "memory" "none")
 				   (and (eq_attr "mode" "SF,V4SF,V8SF")
 					(eq_attr "type" "ssediv"))))
 			 "hsw_decodern,hsw_p0,hsw_ssediv*14")
 
-(define_insn_reservation "hsw_sse_div_SF_load" 18
+(define_insn_reservation "hsw_sse_div_SF_load" 14
 			 (and (eq_attr "cpu" "generic,haswell")
 			      (and (eq_attr "memory" "none")
 				   (and (eq_attr "mode" "SF,V4SF,V8SF")
 					(eq_attr "type" "ssediv"))))
 			 "hsw_decodern,(hsw_p23+hsw_p0),hsw_ssediv*14")
 
-(define_insn_reservation "hsw_sse_div_DF" 28
+(define_insn_reservation "hsw_sse_div_DF" 14
 			 (and (eq_attr "cpu" "generic,haswell")
 			      (and (eq_attr "memory" "none")
 				   (and (eq_attr "mode" "DF,V2DF,V4DF")
 					(eq_attr "type" "ssediv"))))
 			 "hsw_decodern,hsw_p0,hsw_ssediv*20")
 
-(define_insn_reservation "hsw_sse_div_DF_load" 28
+(define_insn_reservation "hsw_sse_div_DF_load" 14
 			 (and (eq_attr "cpu" "generic,haswell")
 			      (and (eq_attr "memory" "none")
 				   (and (eq_attr "mode" "DF,V2DF,V4DF")
 					(eq_attr "type" "ssediv"))))
 			 "hsw_decodern,(hsw_p23+hsw_p0),hsw_ssediv*20")
 
-(define_insn_reservation "hsw_sse_icvt" 4
+(define_insn_reservation "hsw_sse_icvt" 6
 			 (and (eq_attr "cpu" "generic,haswell")
 			      (and (eq_attr "memory" "none")
 				   (eq_attr "type" "sseicvt")))
 			 "hsw_decodern,hsw_p1")
 
-(define_insn_reservation "hsw_sse_icvt_load" 4
+(define_insn_reservation "hsw_sse_icvt_load" 7
 			 (and (eq_attr "cpu" "generic,haswell")
 			      (and (eq_attr "memory" "!none")
 				   (eq_attr "type" "sseicvt")))
 			 "hsw_decodern,hsw_p23+hsw_p1")
 
 
-(define_insn_reservation "hsw_sse_icvt_SI" 3
+(define_insn_reservation "hsw_sse_icvt_SI" 6
 			 (and (eq_attr "cpu" "generic,haswell")
 			      (and (eq_attr "memory" "none")
 				   (and (eq_attr "mode" "SI")
 					(eq_attr "type" "sseicvt"))))
 			 "hsw_decodern,hsw_p1")
 
-(define_insn_reservation "hsw_sse_icvt_SI_load" 3
+(define_insn_reservation "hsw_sse_icvt_SI_load" 6
 			 (and (eq_attr "cpu" "generic,haswell")
 			      (and (eq_attr "memory" "!none")
 				   (and (eq_attr "mode" "SI")
-- 
2.17.0

